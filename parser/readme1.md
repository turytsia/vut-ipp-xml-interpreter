**Implementační dokumentace k 1. úloze do IPP 2022/2023**<br/>**Jméno a příjmení:** Oleksandr Turytsia<br/>**Login:** xturyt00<br/>

## PHP Parser [ENG]
**parser.php** is a script that analyzes IPPcode23.

It takes the code from input, breakes it into smaller pieces, validates its syntax and outputs valid [XML](https://www.w3.org/standards/xml/core#:~:text=What%20is%20XML%3F,more%20suitable%20for%20Web%20use.) representation of IPPCode23.
### Usage
```
php8.1 parser.php <[source] [--options] [-flags] [--help]
```

### Implementation
[![](https://mermaid.ink/img/pako:eNqFVm1P2zAQ_iuWyYcUWtS0tIA1IU2DvUhDSGyapilSZBrTRkvsynY6sq7_fWc7aZy-wAfS-Pzc3XOvYY1nImWY4FlOlbrN6FzSIuYx_8KVluVMZ4KjweAGoTsphfxMeZozSZABLEv9ntO8Ukwehuxb8c6PZc4ImoliSSVTSAuDf1gyCfooxqcxBo1TeIvgzdMjCBQ0Es8-OrLom1rvB82zlGohVZfB6zg_nNeQr2EdV7h9ZDSFO4JKBcGJUoPMcu7ycVEKX7O1C54-CllQreH07t9g4Jt2lmP-8_7rJ8YhD0DOgR6ss63QprUr2guvk965gzF1SNMV0aO5H2HMbS912wGhdczPEGIvmU7-ZHqRMHMbBvCTmBYkNf4DvKs-CgqmFJ0bMVDL-LwXIIRWIktjvvF87DSUdTNAKBCuNRToUylpZZwn4KiGhw0g0dWSAcqCepbinOmkUQ97rTpaUJVw4d-hJyHyDqG2YEDkBD3bY5JnnIWBeYInXkEsLijDVbJCrFjCeAqCBrSNeQ8HA1MwrtXbSFYsdXUU5nH2G9amL8iMhNSRDzqJ69VFOLN5ssA2SX5l2pFpap-pZGG9hI5TQ6pJo4OsqAzh79i1qoqn0DyOAUxBQ_PwAR1ETp9YHtrnAYwXQ71fLPvAmaxF303XWPGK5uU2v8e6rLnvHzLT2ylGux9cMTgtPAcgENLOf8a1O25bfVuwwM1wnvhQVzFjLez5hLv9TtqGtxfGgJFaE7tN0ywBv2s8FlkbiyJH5tBrtR7ptlarDAT2O8zffHbYAreECLp9uL8Vs9LMiZUvpTCfNWJU7nLm5F0eje-T7frzCYR-KMSvEWRmbynt7sz1W8lQvCHhDZdj4Zdqg_u4YLBQshQ-2GAVwfrWC4gnxvC5xSmVv2PscLTU4lvFZ5iAadbH5RJmkdXfd0yeaa5AytIMCN7X_wGYnz5eUv5LiKJRhCMma_yCSTQ-H0-uxqPocjKZjofw0scVJoPo_Go0jMbRdBqNxhfX16NNH_-1FqLz4fBiPJpeR9HlaDKKrsab_4Cv8uM?type=png)](https://mermaid.live/edit#pako:eNqFVm1P2zAQ_iuWyYcUWtS0tIA1IU2DvUhDSGyapilSZBrTRkvsynY6sq7_fWc7aZy-wAfS-Pzc3XOvYY1nImWY4FlOlbrN6FzSIuYx_8KVluVMZ4KjweAGoTsphfxMeZozSZABLEv9ntO8Ukwehuxb8c6PZc4ImoliSSVTSAuDf1gyCfooxqcxBo1TeIvgzdMjCBQ0Es8-OrLom1rvB82zlGohVZfB6zg_nNeQr2EdV7h9ZDSFO4JKBcGJUoPMcu7ycVEKX7O1C54-CllQreH07t9g4Jt2lmP-8_7rJ8YhD0DOgR6ss63QprUr2guvk965gzF1SNMV0aO5H2HMbS912wGhdczPEGIvmU7-ZHqRMHMbBvCTmBYkNf4DvKs-CgqmFJ0bMVDL-LwXIIRWIktjvvF87DSUdTNAKBCuNRToUylpZZwn4KiGhw0g0dWSAcqCepbinOmkUQ97rTpaUJVw4d-hJyHyDqG2YEDkBD3bY5JnnIWBeYInXkEsLijDVbJCrFjCeAqCBrSNeQ8HA1MwrtXbSFYsdXUU5nH2G9amL8iMhNSRDzqJ69VFOLN5ssA2SX5l2pFpap-pZGG9hI5TQ6pJo4OsqAzh79i1qoqn0DyOAUxBQ_PwAR1ETp9YHtrnAYwXQ71fLPvAmaxF303XWPGK5uU2v8e6rLnvHzLT2ylGux9cMTgtPAcgENLOf8a1O25bfVuwwM1wnvhQVzFjLez5hLv9TtqGtxfGgJFaE7tN0ywBv2s8FlkbiyJH5tBrtR7ptlarDAT2O8zffHbYAreECLp9uL8Vs9LMiZUvpTCfNWJU7nLm5F0eje-T7frzCYR-KMSvEWRmbynt7sz1W8lQvCHhDZdj4Zdqg_u4YLBQshQ-2GAVwfrWC4gnxvC5xSmVv2PscLTU4lvFZ5iAadbH5RJmkdXfd0yeaa5AytIMCN7X_wGYnz5eUv5LiKJRhCMma_yCSTQ-H0-uxqPocjKZjofw0scVJoPo_Go0jMbRdBqNxhfX16NNH_-1FqLz4fBiPJpeR9HlaDKKrsab_4Cv8uM)

The whole implementation is just a pipe of specific parts of a parser that are connected with each other. 
- **InputReader** is a class, responsible for reading contents from input.
Besides reading, it also uses [trait](https://www.php.net/manual/en/language.oop5.traits.php) *Formatter* that provides 3 methods to format string:
    - *remove_endings* - removes `\n` from the end of the line
    - *remove_comments* - removes comments inside of a line
    - *remove_empty* - removes empty lines
    >**Note**
    >There is *format_line($line)* method that combines all the methods above in the same order. This specific order perfectly filters all the lines. 

- **InputAnalyser** takes formatted lines, after *InputReader* is done reading input, and converts each into *Instruction* object. Also validates header of a program.
    - *Instruction* is a special class to ease work with instructions, that takes a formatted line as an argument for the constructor and validates it while creating new object, using helper class *InstructionRule* where specific rules for exact instruction are defined.
    - *Operand* is similiar class to *Instruction* that is being created in pair with *Instruction* for the same reason.
- **OutputGenerator** is a component that produces XML out of instructions, that it takes as the array, generated by *InputAnalyzer*.
    >**Note**
    >The *OutputGenerator* is only a child of *XMLGenerator*. That means that object itself doesn't generate the entire XML structure. It uses special methods that are inherited from *XMLGenerator*.
- **XMLGenerator** is configured class that generates main XML structure.

To validate data during all the process, some of the objects are using class collection *Validators*, where entire validation logic is stored. If validation fails anywhere, *ErrorHandler* will throw the error.